{"version":3,"file":"index.js","sources":["../../src/client/composables/useGitLocales.ts","../../src/client/components/VPHeader.ts","../../src/client/components/Contributors.ts","../../src/client/components/Changelog.ts"],"sourcesContent":["import type { ExactLocaleConfig } from '@vuepress/helper/client'\nimport { useLocaleConfig } from '@vuepress/helper/client'\nimport type { ComputedRef } from 'vue'\nimport type { GitLocaleData } from '../../shared/index.js'\n\ndeclare const __GIT_LOCALES__: ExactLocaleConfig<GitLocaleData>\n\nexport const locales = __GIT_LOCALES__\n\nexport const useGitLocaleConfig = (): ComputedRef<GitLocaleData> =>\n  useLocaleConfig(locales)\n","import type { FunctionalComponent } from 'vue'\nimport { h } from 'vue'\n\nexport interface VPHeaderProps {\n  /** header text */\n  text: string\n  /** header anchor */\n  anchor: string\n  /**\n   * header level\n   *\n   * @default 2\n   */\n  level?: number\n}\n\nexport const VPHeader: FunctionalComponent<VPHeaderProps> = ({\n  level = 2,\n  text,\n  anchor,\n}) =>\n  h(\n    `h${level || 2}`,\n    { id: anchor, tabindex: '-1' },\n    h('a', { href: `#${anchor}`, class: 'header-anchor' }, h('span', text)),\n  )\n","import type { VNode } from 'vue'\nimport { computed, defineComponent, h } from 'vue'\nimport { usePageData, usePageFrontmatter } from 'vuepress/client'\nimport type {\n  GitContributor,\n  GitPluginFrontmatter,\n  GitPluginPageData,\n} from '../../shared/index.js'\nimport { useGitLocaleConfig } from '../composables/index.js'\nimport { VPHeader } from './VPHeader.js'\n\nimport '../styles/contributors.css'\n\nexport const Contributors = defineComponent({\n  name: 'Contributors',\n  props: {\n    /** Contributor title */\n    title: String,\n\n    /** header level of contributor title */\n    headerLevel: {\n      type: Number,\n      default: 2,\n    },\n  },\n  setup(props) {\n    const locale = useGitLocaleConfig()\n    const frontmatter = usePageFrontmatter<GitPluginFrontmatter>()\n    const page = usePageData<GitPluginPageData>()\n\n    const contributors = computed(() => {\n      if (frontmatter.value.contributors === false) return []\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      return page.value.git?.contributors ?? []\n    })\n\n    const Contributor = ({\n      item: { name, url, avatar },\n    }: {\n      item: GitContributor\n    }): VNode =>\n      h(\n        url ? 'a' : 'span',\n        {\n          href: url,\n          target: '_blank',\n          rel: 'noreferrer',\n          class: 'contributor',\n        },\n        [\n          avatar ? h('img', { src: avatar, alt: name, class: 'avatar' }) : null,\n          h('span', { class: 'name' }, name),\n        ],\n      )\n\n    return () =>\n      contributors.value.length\n        ? [\n            h(VPHeader, {\n              level: props.headerLevel,\n              anchor: 'doc-contributors',\n              text: props.title || locale.value.contributors,\n            }),\n            h(\n              'div',\n              { class: 'vp-contributors' },\n              contributors.value.map((item) =>\n                h(Contributor, { item, key: item.name + item.email }),\n              ),\n            ),\n          ]\n        : null\n  },\n})\n","import { useToggle } from '@vueuse/core'\nimport type { FunctionalComponent } from 'vue'\nimport { computed, defineComponent, h } from 'vue'\nimport { usePageData, usePageFrontmatter, usePageLang } from 'vuepress/client'\nimport type {\n  GitChangelog,\n  GitPluginFrontmatter,\n  GitPluginPageData,\n} from '../../shared/index.js'\nimport { useGitLocaleConfig } from '../composables/index.js'\nimport { VPHeader } from './VPHeader.js'\n\nimport '../styles/vars.css'\nimport '../styles/changelog.css'\n\ntype ResolvedChangelog = Omit<GitChangelog, 'date'> & { datetime: string }\n\nexport const Changelog = defineComponent({\n  name: 'Changelog',\n\n  props: {\n    /** Title of changelog */\n    title: String,\n\n    /** header level of changelog */\n    headerLevel: {\n      type: Number,\n      default: 2,\n    },\n  },\n\n  setup(props) {\n    const locale = useGitLocaleConfig()\n    const frontmatter = usePageFrontmatter<GitPluginFrontmatter>()\n    const page = usePageData<GitPluginPageData>()\n    const lang = usePageLang()\n\n    const list = computed<ResolvedChangelog[]>(() => {\n      if (frontmatter.value.changelog === false) return []\n\n      const formatter = new Intl.DateTimeFormat(lang.value, {\n        dateStyle: 'short',\n      })\n\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      return (page.value.git?.changelog ?? []).map(({ date, ...item }) => {\n        const datetime = formatter.format(date)\n        return { datetime, ...item }\n      })\n    })\n\n    const latestUpdated = computed(() => {\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      const latest = (page.value.git?.changelog ?? [])[0]\n\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!latest) return ''\n\n      const formatter = new Intl.DateTimeFormat(lang.value, {\n        dateStyle: 'short',\n        timeStyle: 'short',\n      })\n      return formatter.format(latest.date)\n    })\n\n    const [active, toggle] = useToggle()\n\n    const ChangelogHeader: FunctionalComponent = () =>\n      h('div', { class: 'changelog-header', onClick: toggle }, [\n        h('div', { class: 'latest-updated' }, [\n          h('span', { class: 'vpi-changelog' }),\n          h('span', [locale.value.latestUpdateAt, ' ']),\n          h('span', { 'data-allow-mismatch': '' }, latestUpdated.value),\n        ]),\n        h('div', [\n          h('span', { class: 'vpi-changelog-menu' }),\n          h('span', locale.value.viewChangelog),\n        ]),\n      ])\n\n    const ReleaseTag: FunctionalComponent<{ item: ResolvedChangelog }> = ({\n      item,\n    }) =>\n      h(\n        'li',\n        { class: 'changelog release-tag' },\n        h('div', [\n          h('a', { class: 'link release-tag' }, h('code', item.tag)),\n          h('span', { 'class': 'datetime', 'data-allow-mismatch': '' }, [\n            locale.value.timeOn,\n            ' ',\n            item.datetime,\n          ]),\n        ]),\n      )\n\n    const Commit: FunctionalComponent<{ item: ResolvedChangelog }> = ({\n      item,\n    }) =>\n      h('li', { class: 'changelog commit' }, [\n        h(\n          item.commitUrl ? 'a' : 'span',\n          {\n            class: 'link hash',\n            href: item.commitUrl,\n            target: '_blank',\n            rel: 'noreferrer',\n          },\n          [h('code', item.hash.slice(0, 5))],\n        ),\n        h('span', { class: 'divider' }, '-'),\n        h('span', { class: 'message', innerHTML: item.message }),\n        h('span', { 'class': 'datetime', 'data-allow-mismatch': '' }, [\n          locale.value.timeOn || 'on',\n          ' ',\n          item.datetime,\n        ]),\n      ])\n\n    return () =>\n      list.value.length\n        ? [\n            h(VPHeader, {\n              level: props.headerLevel,\n              anchor: 'doc-changelog',\n              text: props.title || locale.value.changelog,\n            }),\n\n            h('div', { class: ['vp-changelog', { active: active.value }] }, [\n              h(ChangelogHeader),\n\n              h('ul', { class: 'changelog-list' }, [\n                list.value.map((item) =>\n                  item.tag\n                    ? h(ReleaseTag, { item, key: item.tag })\n                    : h(Commit, { item, key: item.hash }),\n                ),\n              ]),\n            ]),\n          ]\n        : null\n  },\n})\n"],"names":["locales","useGitLocaleConfig","useLocaleConfig","VPHeader","level","text","anchor","h","Contributors","defineComponent","props","locale","frontmatter","usePageFrontmatter","page","usePageData","contributors","computed","Contributor","name","url","avatar","item","Changelog","lang","usePageLang","list","formatter","date","latestUpdated","latest","active","toggle","useToggle","ChangelogHeader","ReleaseTag","Commit"],"mappings":"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"}